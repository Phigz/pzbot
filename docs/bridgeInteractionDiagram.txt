                ┌────────────────────────────┐
                │        Bot Runtime          │
                │                            │
                │  - Planner                 │
                │  - Personality             │
                │  - Memory                  │
                └────────────▲───────────────┘
                             │
                Reads         │ Writes
             state.json       │ commands.json
                             │
┌─────────────────────────────┼─────────────────────────────┐
│         Bridge Mod (Lua)     │                             │
│                              │                             │
│  ┌────────────────────────┐ │                             │
│  │ Observation Service    │─┘                             │
│  │                        │                               │
│  │ - Sample player state  │                               │
│  │ - Sample environment   │                               │
│  │ - Serialize snapshot   │                               │
│  └────────────────────────┘                               │
│                                                            │
│  ┌────────────────────────┐                               │
│  │ Command Service        │◄──────────────────────────────┘
│  │                        │
│  │ - Poll commands.json   │
│  │ - Validate commands    │
│  │ - Queue execution      │
│  └──────────▲─────────────┘
│             │
│  ┌──────────┴─────────────┐
│  │ Action Executor        │
│  │                        │
│  │ - TimedActions         │
│  │ - Pathfinding          │
│  │ - Context menu invoke  │
│  └──────────▲─────────────┘
│             │
│  ┌──────────┴─────────────┐
│  │ Safety Controller      │
│  │                        │
│  │ - Panic overrides      │
│  │ - Fatigue checks       │
│  │ - Threat aborts        │
│  └──────────▲─────────────┘
│             │
│  ┌──────────┴─────────────┐
│  │ Status Reporter        │
│  │                        │
│  │ - Write status.json    │
│  │ - Signal failures      │
│  └────────────────────────┘
│                                                            │
└────────────────────────────────────────────────────────────┘
                             │
                             ▼
                Project Zomboid Client Runtime
